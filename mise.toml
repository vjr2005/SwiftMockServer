# ─────────────────────────────────────────────
# SwiftMockServer — mise configuration
# ─────────────────────────────────────────────
# Install mise: https://mise.jdx.dev/getting-started.html
#   curl https://mise.jdx.dev/install.sh | sh
#
# Then run:
#   mise install        → install tools
#   mise run setup      → install deps + generate project
#   mise run generate   → generate .xcodeproj/.xcworkspace
# ─────────────────────────────────────────────

[tools]
tuist = "4"

# ─────────────────────────────────────────────
# Tasks
# ─────────────────────────────────────────────

[tasks.setup]
description = "Install dependencies and generate the Xcode project"
run = """
tuist install
tuist generate
"""

[tasks.generate]
description = "Generate the Xcode project (.xcodeproj / .xcworkspace)"
run = "tuist generate"

[tasks.edit]
description = "Open Tuist manifests in Xcode for editing"
run = "tuist edit"

[tasks.build]
description = "Build the SwiftMockServer framework"
run = "tuist build -- -scheme SwiftMockServer"

[tasks.test]
description = "Run the framework tests"
run = "tuist test -- -scheme SwiftMockServer"

[tasks.clean]
description = "Clean artifacts generated by Tuist and Xcode"
run = """
tuist clean
rm -rf *.xcodeproj *.xcworkspace Derived/
"""

[tasks.graph]
description = "Display the project dependency graph"
run = "tuist graph"

[tasks.spm-build]
description = "Build using Swift Package Manager directly"
run = "swift build"

[tasks.spm-test]
description = "Run tests using Swift Package Manager"
run = "swift test"
